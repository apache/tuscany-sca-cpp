
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
<!--
   Licensed to the Apache Software Foundation (ASF) under one
   or more contributor license agreements.  See the NOTICE file
   distributed with this work for additional information
   regarding copyright ownership.  The ASF licenses this file
   to you under the Apache License, Version 2.0 (the
   "License"); you may not use this file except in compliance
   with the License.  You may obtain a copy of the License at
   
     http://www.apache.org/licenses/LICENSE-2.0
     
   Unless required by applicable law or agreed to in writing,
   software distributed under the License is distributed on an
   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
   KIND, either express or implied.  See the License for the
   specific language governing permissions and limitations
   under the License.
-->

<HTML>
<HEAD>
   <META CONTENT="text/html; charset=iso-8859-1" HTTP-EQUIV="Content-Type">
   <META CONTENT="text/css" HTTP-EQUIV="Content-Style-Type">
   <STYLE MEDIA="all" TYPE="text/css">
@import url("../../doc/css/maven-base.css");
@import url("../../doc/css/maven-theme.css");
   </STYLE> 

    <LINK HREF="../doc/css/maven-theme.css" MEDIA="print" REL="stylesheet"
         TYPE="text/css">
   <TITLE>Tuscany SCA Native Samples - HTTPD BigBank Sample</TITLE>
</HEAD>

<BODY>
<DIV ID="bodyColumn"> 
   <DIV ID="contentBox"> 
      <DIV CLASS="section"> 
         <H1>Tuscany SCA Native Samples - HTTPD BigBank Sample</H1> 

         <P>This sample implements the "Simplified BigBank" scenario. A whitepaper describing
            the scenario based on the SCA 0.9 Assembly specification can be found 
            <A HREF="http://www.osoa.org/display/Main/SCA+-+Previously+Published+Specifications">here</A>.
            This is a more modular version of the original Bigbank app, with the account
            service and the account data service are in different composites.
         </P>
         <P>The HTTPD BigBank sample requires the following extensions:
            <UL>
               <LI><A HREF="../../doc/RubyExtension.html">Ruby Extension</A></LI>
               <LI><A HREF="../../doc/Axis2CWSExtension.html">Axis2/C Web Services Extension</A></LI>
               <LI><A HREF="../../doc/SCAExtension.html">SCA Binding Extension</A></LI>
            </UL>
             Please follow the documentation to ensure you have these extensions built and installed
             on your system
         </P>
         <P>There are three sub-projects in this workspace:</P>
         <UL>
            <LI>bigbank.account<BR/>
                This contains the source code and SCDL artifacts for the SCA HTTPD BigBank
                composite implementing the account services.
            </LI>
            <LI>bigbank.accountdata<BR/>
                This contains the source code and SCDL artifacts for the SCA HTTPD BigBank
                composite implementing the account data services.
            </LI>
            <LI>bigbank.wsclient<BR/>
                A sample client which uses an SCA Web Service reference to make a remote 
                call to the BigBank service.
            </LI>
         </UL> 
         <P>Additionally, there is the bigbank.app.composite file. This     
            describes the configuration of the SCA BigBank composite deployed to the SCA
            runtime.                                                                       
         </P>
         <P>Note that this sample does not run on Windows, due to threading incompatibilities 
            between Apache HTTPD and the Ruby runtime</P>
      </DIV>

      <DIV CLASS="section"> 
         <H2>Contents</H2> 
         <OL>
            <LI><A HREF="#linuxbld">Building the HTTPD BigBank sample on Linux and Mac OS X</A></LI>
            <LI><A HREF="#linuxrun">Running the HTTPD BigBank sample on Linux and Mac OS X</A></LI>
            <LI><A HREF="#win">The HTTPD BigBank sample on Windows</A></LI>
            <LI><A HREF="#help">Getting help</A></LI>
         </OL>
      </DIV>


       <DIV CLASS="section"> 
         <A NAME="linuxbld"><H2>Building the HTTPD BigBank sample on Linux and Mac OS X</H2></A>
         <P>If using the binary distribution the samples are built and installed in
            &lt;tuscany_sca_install_dir&gt;/samples - go directly to <A HREF="#linuxrun">Running the samples on Linux and Mac OS X</A>.</P>
         <OL>
             <LI>The following environment variables are required:                                 
                <UL>
                  <LI>TUSCANY_SCACPP=&lt;path to installed Tuscany SCA&gt;                                      
                  <LI>TUSCANY_SDOCPP=&lt;path to installed Tuscany SDO&gt;                                      
                </UL></LI>
             </LI>
             <LI>As the HTTPD BigBank sample is based on Ruby scripts, a specific compilation step is not necessary - 
                 only deployment is required. Deploy the Ruby samples only with the following command sequence:
                  <UL>
                      <LI>cd &lt;tuscany_sca_install_dir&gt;/samples</LI>
                      <LI>./configure --enable-ruby --enable-cpp=no --prefix=$TUSCANY_SCACPP</LI>
                      <LI>make install</LI>
                  </UL>
	              NOTE: If you don't provide the --prefix configure option, it will by default install into
                  /usr/local/tuscany/sca/samples/HttpdBigBank
             </LI>
         </OL>                                                  
        </DIV>

       <DIV CLASS="section"> 
         <A NAME="linuxrun"><H2>Running the HTTPD BigBank sample on Linux and Mac OS X</H2></A>
         <OL>
             <LI>The HTTPD BigBank sample requires the following extensions:
                <UL>
                   <LI><A HREF="../../doc/RubyExtension.html">Ruby Extension</A></LI>
                   <LI><A HREF="../../doc/Axis2CWSExtension.html">Axis2/C Web Services Extension</A></LI>
                   <LI><A HREF="../../doc/SCAExtension.html">SCA Binding Extension</A></LI>
                </UL>
                 Please follow the documentation to ensure you have these extensions built and installed
                 on your system
             </LI>
             <LI>Ensure you have enabled Axis2/C to run Tuscany SCA services. Follow the instructions 
                 found <A HREF="../../doc/Axis2CWSExtension.html#deploy">here</A>.
             </LI>
             <LI>Start the Apache HTTPD server:
                <OL>
                   <LI>The following environment variables are required:                                 
                      <UL>
                        <LI>TUSCANY_SCACPP=&lt;path to installed Tuscany SCA&gt;</LI>                                      
                        <LI>TUSCANY_SDOCPP=&lt;path to installed Tuscany SDO&gt;</LI>                                      
                        <LI>AXIS2C_HOME=&lt;path to Axis2/C version 0.96&gt;</LI>
                      </UL>
                   </LI>
                   <LI>cd &lt;tuscany_sca_install_dir&gt;/samples/HttpdBigBank/deploy/httpserver</LI>
                   <LI>./startserver.sh<BR/>
                       NOTE: Depending on your installation of Apache HTTPD you may need to log in as root before following 
                       these steps. If so, you may also need to uncomment the User and Group directives in the
                       &lt;tuscany_sca_install_dir&gt;/samples/HttpdBigBank/deploy/httpserver/conf/httpd.conf file
                       and set these to the appropriate username and group that the server should run as</LI>
                </OL>
             </LI>
             <LI>Now run the Web Service client:
                <OL>                     
                 <LI>The following environment variables are required:                                 
                    <UL>
                      <LI>TUSCANY_SCACPP=&lt;path to installed Tuscany SCA&gt;</LI>                                      
                      <LI>TUSCANY_SDOCPP=&lt;path to installed Tuscany SDO&gt;</LI>                                      
                      <LI>AXIS2C_HOME=&lt;path to Axis2/C version 0.96&gt;</LI>
                    </UL>
                 </LI>
                 <LI>Run the sample with the following commands:
                    <UL>
                       <LI>cd &lt;tuscany_sca_install_dir&gt;/samples/HttpdBigBank/deploy/bigbank.wsclient</LI>
                       <LI>./runwsclient.sh</LI>
                    </UL>
                 </LI>
                </OL>
            </LI>
            <LI>The PHP web client detailed in the 
                 <A HREF="../CppBigBank/README.html">CppBigBank</A> sample can also be used 
                 with the HTTPD BigBank service that is served by the HTTPD server started above.
             </LI>
         </OL>                                                  
      </DIV>

      <DIV CLASS="section">
         <A NAME="win"><H2>The HTTPD BigBank sample on Windows</H2></A>
         <P>The HttpdBigBank sample does not currently run on Windows, due to the sample being based on Ruby 
            components running under Apache HTTPD. The Ruby runtime is single-threaded and, on Windows, HTTPD 
            is multi-threaded, which means that Ruby throws "cross-thread violation" errors when Tuscany
            attempts to run a Ruby script under HTTPD.</P>
      </DIV>
              
      <DIV CLASS="section"> 
         <A NAME="help"><H2>Getting Help</H2></A>

         <P>First place to look is at the Tuscany FAQ at 
         <A HREF="http://incubator.apache.org/tuscany/faq.html"
            TARGET="_blank">http://incubator.apache.org/tuscany/faq.html</A> </P>

         <P>Any problem with this release can be reported to the Tuscany 
         <A HREF="http://incubator.apache.org/tuscany/mail-lists.html"
            TARGET="_blank">mailing lists</A> or create a JIRA issue at 
         <A HREF="http://issues.apache.org/jira/browse/Tuscany" 
            TARGET="_blank">http://issues.apache.org/jira/browse/Tuscany</A>.</P>
      </DIV>
   </DIV>
</DIV>
</BODY>

</HTML>

